<?xml version="1.0"?>

<!DOCTYPE project SYSTEM "../dtd/Project.dtd"> 

<project default="basicEdit">
    
    <target name="basicEdit">

        <webtest name="Basic editing at page Berlin">
            <!-- don't set this, because then the iframes are not created then
        	<config>
                <header name="User-Agent" value="Mozilla/5.0 (Windows; U; Windows NT 5.1; de; rv:1.9.1.2) Gecko/20090729 Firefox/3.5.1 (.NET CLR 3.5.30729)"/>
            </config>
            -->
            <invoke
                url="${wgServer}${wgScript}/Berlin"
                description="Tests if wiki responds at all by loading the main page" 
            />
            <clickLink
                description="Click edit link"
                xpath="//div[@id='ca-edit']/a"
            />
            <verifyDocumentURL
                description="check URL of editing page"
                text="${wgServer}${wgScript}?title=Berlin&amp;action=edit&amp;mode=wysiwyg"
            />

            <!--
        	<verifyXPath
        	   description="CKeditor"
        	   xpath="//span[@id='cke_wpTextbox1']"
        	/>

        	<verifyXPath
        	   description="Toolbar"
        	   xpath="//td[@id='cke_top_wpTextbox1']/div[@class='cke_toolbox']"
        	/>
            <verifyXPath
               description="Edit window"
               xpath="count(//td[@id='cke_contents_wpTextbox1']/*)"
               text="0"
            />
            -->

            <verifyXPath
                description="textarea for editor"
                xpath="//textarea[@id='wpTextbox1']"
            />
            <verifyTextarea
                description="with parsed content"
                name="wpTextbox1"
                regex="true"
                text="fck_mw"
            />

        	<verifyXPath description="Save page button" xpath="//input[@id='wpSave' and @type='submit']" />
        	<verifyXPath description="Show preview button" xpath="//input[@id='wpPreview' and @type='submit']" />
        	<verifyXPath description="Shop changes button" xpath="//input[@id='wpDiff' and @type='submit']" />

        	<!-- don't save the page, we didn't do changes anyway
        	<clickButton
                description="Click save button"
                xpath="//input[@id='wpSave']"
            />
            -->
        </webtest>

    </target>
</project>
